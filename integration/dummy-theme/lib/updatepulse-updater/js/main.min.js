let P=function(e){function t(e,t){if(r(e)&&"string"==typeof t)return t.split("").reduce((t,a,i,l)=>(t+="\\"==a?l.splice(i+1,1):a in n?n[a](e):a,t),"")}let a={lang:"en-GB"},n={d:e=>u(e.getDate()),D:e=>i(e).substr(0,3),j:e=>e.getDate(),l:e=>i(e),N:e=>e.getDay()||7,S:e=>d(e.getDate()),w:e=>e.getDay(),z:e=>{let t=e.getFullYear(),a=e.getMonth(),n=e.getDate();return Math.floor((Date.UTC(t,a,n)-Date.UTC(t,0,1))/864e5)},W:e=>c(e)[1],F:e=>l(e),m:e=>u(e.getMonth()+1),M:e=>l(e).substr(0,3),n:e=>e.getMonth()+1,t:e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),L:e=>29==new Date(e.getFullYear(),1,29).getDate()?1:0,o:e=>c(e)[0],Y:e=>{let t=e.getFullYear();return t<0&&(t="-"+("000"+Math.abs(t)).slice(-4)),t},y:e=>{let t=e.getFullYear();return t>=0?("0"+t).slice(-2):(t=Math.abs(t),-+("0"+t).slice(-2))},a:e=>e.getHours()<12?"am":"pm",A:e=>e.getHours()<12?"AM":"PM",B:e=>((+e+36e5)%864e5/86400).toFixed(0),g:e=>e.getHours()%12||12,G:e=>e.getHours(),h:e=>u(e.getHours()%12||12),H:e=>u(e.getHours()),i:e=>u(e.getMinutes()),s:e=>u(e.getSeconds()),u:e=>"000000",v:e=>g(e.getMilliseconds()),e:e=>void 0,I:e=>e.getTimezoneOffset()==s(e)[0]?0:1,O:e=>o(-e.getTimezoneOffset(),!1),P:e=>o(-e.getTimezoneOffset(),!0),T:e=>e.toLocaleString("en",{year:"numeric",timeZoneName:"long"}).replace(/[^A-Z]/g,""),Z:e=>-60*e.getTimezoneOffset(),c:e=>a.format(e,"Y-m-d\\TH:i:sP"),r:e=>a.format(e,"D, d M Y H:i:s O"),U:e=>e.getTime()/1e3|0},i=e=>e.toLocaleString(a.lang,{weekday:"long"}),l=e=>e.toLocaleString(a.lang,{month:"long"}),s=e=>{let t=e.getFullYear(),a=[0,2,5,9].map(e=>new Date(t,e).getTimezoneOffset());return[Math.max(...a),Math.min(...a)]},d=e=>{e%=100;let t=["th","st","nd","rd"];return(e<10||e>13)&&t[e%10]||"th"},c=e=>{let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));var a=new Date(Date.UTC(t.getUTCFullYear(),0,1)),n=Math.ceil(((t-a)/864e5+1)/7);return[t.getUTCFullYear(),n]},r=e=>"[object Date]"==Object.prototype.toString.call(e),o=(e,t)=>{let a=e<0?"-":"+";e=Math.abs(e);let n=u(e/60|0),i=u(e%60);return a+n+(t?":":"")+i},u=e=>(e<10?"0":"")+e,g=e=>(e<10?"00":e<100?"0":"")+e,f=e=>"not complete";return a.parse=f,a.format=t,a}();jQuery(document).ready(function(e){e(".wrap-license").each(function(){var t=e(this);if(t.find(".deactivate-license").is(":disabled")){var a=t.find(".deactivate-license").data("next_deactivate"),n=t.find(".deactivate-license").data("date_format"),i=new Date(1e3*a);console.log(i,a),P.lang={lang:document.documentElement.lang},t.find(".deactivate-license").val(t.find(".deactivate-license").val()+" "+P.format(i,n))}}),e("body").on("click",".wrap-license .activate-license",function(t){t.preventDefault();var a=e(this).closest(".wrap-license"),n={nonce:a.data("nonce"),license_key:a.find(".license").val(),package_slug:a.data("package_slug"),action:"upupdater_"+a.attr("id").replace("wrap_license_","")+"_activate_license"};e.ajax({url:UPupdater.ajax_url,data:n,type:"POST",success:function(t){if(t.success){if(a.find(".current-license").html(a.find(".license").val()),a.find(".current-license-error").addClass("hidden"),a.find(".license-message").removeClass("hidden"),a.find(".deactivate-license-container").removeClass("hidden"),a.find(".activate-license-container").addClass("hidden"),e(".license-error-"+a.data("package_slug")+".notice").addClass("hidden"),t.data.may_deactivate?a.find(".deactivate-license").prop("disabled",!1):a.find(".deactivate-license").prop("disabled",!0),a.find(".deactivate-license").val(t.data.deactivate_text),a.find(".deactivate-license").is(":disabled")){var n=t.data.next_deactivate,i=t.data.date_format,l=new Date(1e3*n);console.log(l,n),P.lang={lang:document.documentElement.lang},a.find(".deactivate-license").val(a.find(".deactivate-license").val()+" "+P.format(l,i))}}else{var s=a.find(".current-license-error");s.html(t.data[0].message+"<br/>"),s.removeClass("hidden"),a.find(".license-message").removeClass("hidden")}""===a.find(".current-license").html()?(a.find(".current-license-label").addClass("hidden"),a.find(".current-license").addClass("hidden")):(a.find(".current-license-label").removeClass("hidden"),a.find(".current-license").removeClass("hidden"))}})}),e("body").on("click",".wrap-license .deactivate-license",function(t){t.preventDefault();var a=e(this).closest(".wrap-license"),n={nonce:a.data("nonce"),license_key:a.find(".license").val(),package_slug:a.data("package_slug"),action:"upupdater_"+a.attr("id").replace("wrap_license_","")+"_deactivate_license"};e.ajax({url:UPupdater.ajax_url,data:n,type:"POST",success:function(e){if(e.success)a.find(".current-license").html(""),a.find(".current-license-error").addClass("hidden"),a.find(".license-message").addClass("hidden"),a.find(".deactivate-license-container").addClass("hidden"),a.find(".activate-license-container").removeClass("hidden");else{var t=a.find(".current-license-error");t.html(e.data[0].message+"<br/>"),t.removeClass("hidden"),a.find(".license-message").removeClass("hidden")}""===a.find(".current-license").html()?(a.find(".current-license-label").addClass("hidden"),a.find(".current-license").addClass("hidden")):(a.find(".current-license-label").removeClass("hidden"),a.find(".current-license").removeClass("hidden"))}})})});